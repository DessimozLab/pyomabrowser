{% extends  "base_hog.html" %}
{% load staticfiles %}

{% block contentTab %}

<script src='{% static "js/tablehooks.js" %}' type="text/javascript"></script>

<!-- D3 todo dl the lib-->
<script src="https://d3js.org/d3.v5.js"></script>


<!-- Domain Visualisation -->
<script src='{% static "js/profile.js" %}' type="text/javascript"></script>

<link href='{% static "css/profile.css" %}' rel="stylesheet" type="text/css"/>

{{ sim_data|json_script:"hello-data" }}
{{ taxon_region|json_script:"tax-data" }}
{{ species|json_script:"species-data" }}
{{ reference|json_script:"ref-data" }}


<div class="list-group-item ">


    <div class="container ">
        <div class="row">
            <div class="col-2 my-auto text-center" style="padding: 0px">

                <b>Reference</b>

            </div>

            <div class="col">


                <div class="profile_vis_ref" id="Reference"></div>



            </div>

        </div>

        <div class="row">

             <div class="col-2 my-auto  text-right" style="padding: 0px">

             <small style="color: #9d9d9d;">Use mini-profile <br> to zoom/pan</small>


            </div>

            <div class="col">

                <div class="overview" id="overview">

                </div>

                </div>



        </div>
    </div>

</div>

<br>


<div id="profile_container">


    <ul class="list-group list-group-flush">

        {% for key, val in sim_data.items %}

        <li class="list-group-item">

            <div class="container">
                <div class="row">
                    <div class="col-2 my-auto">
                        <strong>[{{forloop.counter}}]</strong>
                        <script>   document.write(tablehooks.format_generic_group_id({{key}},{'type': "HOG"}));  </script>
                    </div>

                    <div class="col  profile_vis" id="{{ key }}">

                        <img src="{% static " image/loading.gif" %}" alt="Loading profile...">

                    </div>

                </div>
            </div>


        </li>

        {% endfor %}

    </ul>


</div>


<script>

    $(function () {
        "use strict";
        var resizeDiv = function (object) {
            object.height($(window).height() - 420);
        };


        $(window).ready(function () {
            resizeDiv($('#profile_container'));
        });

        $(window).bind("resize", function () {
            resizeDiv($('#profile_container'));
        });

    });

    window.onload = function () {


        var value = JSON.parse(document.getElementById('hello-data').textContent);
        var value_tax = JSON.parse(JSON.parse(document.getElementById('tax-data').textContent));
        var value_sp = JSON.parse(JSON.parse(document.getElementById('species-data').textContent));
        var ref = JSON.parse(JSON.parse(document.getElementById('ref-data').textContent));

        profile.visualize_all(value, value_tax, value_sp, ref);


    };


</script>


{% endblock contentTab %}
{% extends  "base_template.html" %}
{% load staticfiles %}

{% block title %}Phylostratigraphy{% endblock %}

{% block content %}


    <script src="{% static 'phylostratigraphy/BigInteger.min.js' %}"></script>
    <script src="{% static 'phylostratigraphy/jquery-2.1.4.min.js' %}"></script>
    <script src="{% static 'phylostratigraphy/treecompare.js' %}"></script>
    <script src="{% static 'phylostratigraphy/d3.min.js' %}"></script>
    <script src="{% static 'phylostratigraphy/FileSaver.min.js' %}"></script>
    <script src="{% static 'phylostratigraphy/underscore-min.js' %}"></script>


    <link rel="stylesheet" href="{% static "phylostratigraphy/style.css" %}"/>


    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/solid.css" integrity="sha384-v2Tw72dyUXeU3y4aM2Y0tBJQkGfplr39mxZqlTBDUZAb9BGoC40+rdFCG0m10lXk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/fontawesome.css" integrity="sha384-q3jl8XQu1OpdLgGFvNRnPdj5VIlCvgsDQTQB6owSOHWlAurxul7f+JpUOVdAiJ5P" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





    <style>
    text {
        font-family: 'Open Sans', sans-serif;
        text-rendering: optimizeLegibility;
        stroke: none;
    }
    </style>

<div class="modal  "  id="myModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Phylostratigraphy help</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
                        <embed src="https://cdn.rawgit.com/DessimozLab/pyham/fc01fb94/help.pdf"  width="100%" height="600px">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


        <!-- Button trigger modal -->
        <button style="position: fixed; bottom: 50%;right: 8px; z-index: 10000; color: white;background-color: #555" id="help_modal_button" type="button" class="btn" data-toggle="modal" data-target="#myModal">
            Help (tmp)
        </button>


<div id="oma-generic-container">




        <div class="container-fluid" style="height: 100vh;">





            <div class="row">

    <div class="col" style="height:100vh; background-color: #F9F9F9"> <!-- FCFCFC -->

        <h2  style="position:fixed;margin: 8px">OMA phylostratigraphy viewer</h2>


        <div id="phylo">

        <div id="vis-container1" style="width: 100%; height: calc(100vh - 85px);">
        <div id="scale-1"> </div>
        </div>
        <script type="text/javascript">


            $.getJSON("https://oma-stage.vital-it.ch/All/genomes.json", function(data) {


                console.log(data)

            var treecomp = TreeCompare().init({
                enableScale: true,
                scaleColor: "black",
                showHistogramValues: true,
                showHistogramSummaryValue: true
            });
            treeData = '{"name": "Eutheria", "length": 0.01, "children": [{"name": "Xenarthra", "length": 0.01, "children": [{"name": "Choloepus hoffmanni", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Dasypus novemcinctus", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Afrotheria", "length": 0.01, "children": [{"name": "Echinops telfairi", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Loxodonta africana", "length": 0.01, "numberGenes": 7, "evolutionaryEvents": {"duplication": 5, "retained": 1, "gained": null, "duplicated": 6, "lost": 0}, "collapsed": "false", "numberEvents": 5}, {"name": "Procavia capensis", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 2}, "collapsed": "false", "numberEvents": 2}], "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}, {"name": "Boreoeutheria", "length": 0.01, "children": [{"name": "Laurasiatheria", "length": 0.01, "children": [{"name": "Insectivora", "length": 0.01, "children": [{"name": "Erinaceus europaeus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Sorex araneus", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Chiroptera", "length": 0.01, "children": [{"name": "Myotis lucifugus", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Pteropus vampyrus", "length": 0.01, "numberGenes": 6, "evolutionaryEvents": {"duplication": 5, "retained": 0, "gained": null, "duplicated": 6, "lost": 0}, "collapsed": "false", "numberEvents": 5}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Equus caballus", "length": 0.01, "numberGenes": 4, "evolutionaryEvents": {"duplication": 3, "retained": 0, "gained": null, "duplicated": 4, "lost": 0}, "collapsed": "false", "numberEvents": 3}, {"name": "Carnivora", "length": 0.01, "children": [{"name": "Felis catus", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}, {"name": "Caniformia", "length": 0.01, "children": [{"name": "Canis lupus familiaris", "length": 0.01, "numberGenes": 5, "evolutionaryEvents": {"duplication": 4, "retained": 0, "gained": null, "duplicated": 5, "lost": 0}, "collapsed": "false", "numberEvents": 4}, {"name": "Ailuropoda melanoleuca", "length": 0.01, "numberGenes": 5, "evolutionaryEvents": {"duplication": 4, "retained": 0, "gained": null, "duplicated": 5, "lost": 0}, "collapsed": "false", "numberEvents": 4}, {"name": "Mustela putorius furo", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Cetartiodactyla", "length": 0.01, "children": [{"name": "Tursiops truncatus", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 3}, "collapsed": "false", "numberEvents": 3}, {"name": "Sus scrofa", "length": 0.01, "numberGenes": 7, "evolutionaryEvents": {"duplication": 5, "retained": 1, "gained": null, "duplicated": 6, "lost": 1}, "collapsed": "false", "numberEvents": 6}, {"name": "Bovidae", "length": 0.01, "children": [{"name": "Bos taurus", "length": 0.01, "numberGenes": 4, "evolutionaryEvents": {"duplication": 1, "retained": 2, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}, {"name": "Ovis aries", "length": 0.01, "numberGenes": 3, "evolutionaryEvents": {"duplication": 0, "retained": 3, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 3, "evolutionaryEvents": {"duplication": 1, "retained": 1, "gained": null, "duplicated": 2, "lost": 1}, "collapsed": "false", "numberEvents": 2}, {"name": "Vicugna pacos", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 2}, "collapsed": "false", "numberEvents": 3}], "numberGenes": 3, "evolutionaryEvents": {"duplication": 2, "retained": 0, "gained": null, "duplicated": 3, "lost": 0}, "collapsed": "false", "numberEvents": 2}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Euarchontoglires", "length": 0.01, "children": [{"name": "Primates", "length": 0.01, "children": [{"name": "Strepsirrhini", "length": 0.01, "children": [{"name": "Microcebus murinus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Otolemur garnettii", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Haplorrhini", "length": 0.01, "children": [{"name": "Simiiformes", "length": 0.01, "children": [{"name": "Callithrix jacchus", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 3}, "collapsed": "false", "numberEvents": 4}, {"name": "Catarrhini", "length": 0.01, "children": [{"name": "Cercopithecinae", "length": 0.01, "children": [{"name": "Macaca mulatta", "length": 0.01, "numberGenes": 4, "evolutionaryEvents": {"duplication": 0, "retained": 4, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Papio anubis", "length": 0.01, "numberGenes": 3, "evolutionaryEvents": {"duplication": 0, "retained": 3, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Chlorocebus sabaeus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 3}, "collapsed": "false", "numberEvents": 3}], "numberGenes": 4, "evolutionaryEvents": {"duplication": 1, "retained": 2, "gained": null, "duplicated": 2, "lost": 1}, "collapsed": "false", "numberEvents": 2}, {"name": "Hominoidea", "length": 0.01, "children": [{"name": "Hominidae", "length": 0.01, "children": [{"name": "Pongo abelii", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 4}, "collapsed": "false", "numberEvents": 4}, {"name": "Homininae", "length": 0.01, "children": [{"name": "Gorilla gorilla gorilla", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 4}, "collapsed": "false", "numberEvents": 4}, {"name": "Pan", "length": 0.01, "children": [{"name": "Pan paniscus", "length": 0.01, "numberGenes": 5, "evolutionaryEvents": {"duplication": 0, "retained": 5, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Pan troglodytes", "length": 0.01, "numberGenes": 6, "evolutionaryEvents": {"duplication": 0, "retained": 6, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 6, "evolutionaryEvents": {"duplication": 1, "retained": 4, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}, {"name": "Homo sapiens", "length": 0.01, "numberGenes": 4, "evolutionaryEvents": {"duplication": 1, "retained": 2, "gained": null, "duplicated": 2, "lost": 2}, "collapsed": "false", "numberEvents": 3}], "numberGenes": 5, "evolutionaryEvents": {"duplication": 1, "retained": 3, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 4, "evolutionaryEvents": {"duplication": 0, "retained": 4, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Nomascus leucogenys", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 4}, "collapsed": "false", "numberEvents": 4}], "numberGenes": 4, "evolutionaryEvents": {"duplication": 0, "retained": 4, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 4, "evolutionaryEvents": {"duplication": 0, "retained": 4, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 4, "evolutionaryEvents": {"duplication": 3, "retained": 0, "gained": null, "duplicated": 4, "lost": 0}, "collapsed": "false", "numberEvents": 3}, {"name": "Tarsius syrichta", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Tupaia belangeri", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Glires", "length": 0.01, "children": [{"name": "Lagomorpha", "length": 0.01, "children": [{"name": "Ochotona princeps", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Oryctolagus cuniculus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Rodentia", "length": 0.01, "children": [{"name": "Dipodomys ordii", "length": 0.01, "numberGenes": 2, "evolutionaryEvents": {"duplication": 1, "retained": 0, "gained": null, "duplicated": 2, "lost": 0}, "collapsed": "false", "numberEvents": 1}, {"name": "Hystricomorpha", "length": 0.01, "children": [{"name": "Cavia porcellus", "length": 0.01, "numberGenes": 5, "evolutionaryEvents": {"duplication": 4, "retained": 0, "gained": null, "duplicated": 5, "lost": 0}, "collapsed": "false", "numberEvents": 4}, {"name": "Octodon degus", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Chinchilla lanigera", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Fukomys damarensis", "length": 0.01, "numberGenes": 18, "evolutionaryEvents": {"duplication": 17, "retained": 0, "gained": null, "duplicated": 18, "lost": 0}, "collapsed": "false", "numberEvents": 17}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Ictidomys tridecemlineatus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Myomorpha", "length": 0.01, "children": [{"name": "Jaculus jaculus", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}, {"name": "Muroidea", "length": 0.01, "children": [{"name": "Murinae", "length": 0.01, "children": [{"name": "Mus musculus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Rattus norvegicus", "length": 0.01, "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}, {"name": "Nannospalax galili", "length": 0.01, "numberGenes": 0, "evolutionaryEvents": {"duplication": 0, "retained": 0, "gained": null, "duplicated": 0, "lost": 1}, "collapsed": "false", "numberEvents": 1}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": {"duplication": 0, "retained": 1, "gained": null, "duplicated": 0, "lost": 0}, "collapsed": "false", "numberEvents": 0}], "numberGenes": 1, "evolutionaryEvents": false, "collapsed": "false", "numberEvents": null}';

            var tree1 = treecomp.addTree(treeData, undefined, "single");
            treecomp.viewTree(tree1.name, "vis-container1", "scale-1");
            treecomp.addMainLegend(tree1.name);


            });
        </script>
        </div>


    </div>



  </div>


        </div>


    </div>


</div>

{% endblock content %}
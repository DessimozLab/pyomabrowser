{% load staticfiles %}

        <table class="table table-hover" id="grpTable"
               data-show-toggle="true"
               data-taxon-filter="true" data-url-species-tree="/All/genomes.json"
               data-show-columns="true"
               data-search="true"
               data-show-export="true"
               data-pagination="true"
               data-page-size="25"
               data-page-list="[10, 25, 50, 100, All]"
               data-mobile-responsive="true"
               data-check-on-init="true"
               data-undefined-text=""
               data-id-field="protid" data-row-attributes="tablehooks.add_proteinrow_attrs"
               data-url="{{ table_data_url }}">

            <thead>


             <tr>


                   <th class="micro-header" data-field="type_p"  data-align="center" data-halign="center"   data-formatter="stateFormatterPO" >OMA <br>Pairs
                   </th>


                <th class="micro-header" data-field="type_h"   data-align="center" data-halign="center"   data-formatter="stateFormatterH" >HOG <br> derived
                   </th>


                <th class="micro-header" data-field="type_g"   data-align="center" data-halign="center"   data-formatter="stateFormatterOG" >OMA <br> Group
                   </th>


                 <th  data-field="kingdom" data-sortable="true" data-filter-control="select"
                    data-formatter="tablehooks.format_as_kingdom_tag" data-title-tooltip="Domain of Life">D.</th>
                <th  data-field="taxon" data-sortable="true" data-filter-control="input"
                    data-formatter="tablehooks.format_sciname">Species</th>
                <th  data-field="protid" data-sortable="true" data-formatter="tablehooks.format_vps_link">Protein ID</th>
                 <th  data-field="RelType" data-sortable="true" >Relation type</th>
                <th  data-field="xrefid" data-sortable="true" data-formatter="tablehooks.format_xref">Cross reference</th>
                 <th  data-sortable="false" class="domain_vis">Domain Architectures</th>

 </tr>


            </thead>
            <div class="alert alert-info text-center alert_remove" role="alert" style="margin-bottom:0; padding: 4px; display:none">
                Genes not present in selected taxon have been filtered out as per settings.
                <a  class="alert-link" id='reset_taxon_filter' > Click here to reset.</a>
            </div>

        </table>


<script>


    // Add header

  function stateFormatterPO(value, row, index) {




    if (row['type_p'] === 1) {
      return '<i class="fas fa-check " style="color:green"></i>';
    }
    else {
      return ' '
    }
  }

  function stateFormatterH(value, row, index) {


    if (row['type_h'] === 1) {
      return '<a href="{% url 'hog_viewer' entry.oma_hog_root %}"><i class="fas fa-check " style="color:green"></i></a>';
    }
    else {
      return ' '
    }
  }

  function stateFormatterOG(value, row, index) {


    if (row['type_g'] === 1) {
      return '<a href="{% url 'omagroup_members' entry.oma_group %}"><i class="fas fa-check " style="color:green"></i></a>';
    }
    else {
      return ' '
    }
  }


</script>



<!-- D3 and D3 Tooltip -->
<script src="{% static "js/d3.v3.min.js" %}" type="text/javascript"></script>
<script src="{% static "js/d3.tip.v0.6.3.js" %}" type="text/javascript"></script>


<!-- Domain Visualisation -->
<script src="{% static "js/domains_vis.js" %}" type="text/javascript"></script>
<link href="{% static "css/domains_vis.css" %}" rel="stylesheet" type="text/css" />



<!-- bootstrap-table -->
<script src="{% static "js/tablehooks.js" %}" type="text/javascript"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css">

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>


 <!-- taxon filter import: Core -->
<script src="{% static "js/tnt.min.js" %}"></script>
<!-- <script src="{% static "js/bootstrap-table-filtertaxon.js" %}"></script> -->
<link type="text/css" rel="stylesheet" href="{% static "css/filtertaxon.css" %}"/>

<!-- taxon filter import: phyloIo -->
<script src="{% static "js/underscore-min.js" %}"></script>
 <script src="{% static "js/treecompare.js" %}"></script>
<link type="text/css" rel="stylesheet" href="{% static "css/phylotree.css" %}"/>
<link type="text/css" rel="stylesheet" href="{% static "css/typeaheadjs.css" %}"/>
<link type="text/css" rel="stylesheet" href="{% static "css/treecompare.css" %}"/>



<!-- taxon filter import: Editable field -->
<link type="text/css" rel="stylesheet" href="{% static "css/bootstrap-editable.css" %}"/>
<script src="{% static "js/bootstrap-editable.js" %}"></script>

<script>
    var tab = $("#grpTable");
    var icons = tab.bootstrapTable('getOptions').icons;
    $.extend(icons, {export: 'fa-download'});
    tab.bootstrapTable({
        reorderableColumns: true,
        clickToSelect: false,
        showMultiSort: true,
        showLoading: true,
        onPostBody: function () {
        domains.visualize_all(".protein");
        },
        onLoadSuccess: function (data) {
            tab.bootstrapTable('hideLoading');
        },
        refreshOptions: {'icons': icons}
    });

</script>


{% extends  "core.html" %}
{% load staticfiles %}
{% load bootstrap3 %}


{% block title %}OMA Orthology database: orthologs among hundreds of complete genomes across all of life{% endblock %}


{% block content %}
<!--           -->
<!-- alert    -->
<div class="container-fluid">

    <div class="row">
        <div class="col-sm-12 col-md-10 col-md-offset-1">
	       <div class="alert alert-success thd" role="alert">
               Open call for an OMA Visiting Fellowship. <a href="/oma/fellowship">Find out more</a>
	       </div>
        </div>
    </div>


    <!--           -->
    <!-- content    -->

    <div class="row">
        <!--           -->
        <!-- search    -->
        <div class="col-sm-12 col-md-10 col-md-offset-1">
            <div class="jumbotron">
                <div class="container">
                    <img src="{% static "image/oma2.png" %}" class="img-responsive margin-auto" alt="OMA logo">

                    <p><br></p>
                    <form role="search" id="searchForm" action="/cgi-bin/gateway.pl" method="GET">
                    <div class="col-md-10 col-md-offset-1">
                        <div class="col-sm-4">
                            <select id="selectBrowser" class="form-control btn-mini" name="f">
                                <option value="DisplayEntry" selected="selected">Identifier</option>
                                <option value="SearchSeqDb">Protein sequence</option>
                                <option value="DisplayGroup">OMA group</option>
                                <option value="SearchDb">Full-text search</option>
                            </select>
                        </div>
                        <div class="col-sm-8">
                            <div class="input-group">
                                <input id='inputBrowser' name="p1" type="text" class="form-control" />
                                <span class="input-group-btn">
                                <button class="btn btn-default" id='loupeBrowser' type="submit">
                                    <span class="glyphicon glyphicon-search "></span>
                                </button>
                                </span>
                            </div>
                            <a href="#" id="toggle">Expand (e.g. to paste a long amino-acid sequence)</a>
                        </div>
                    </div>
                    </form>
                    <br>
                </div>
                <div class="row top-buffer">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="text-center">
                            Examples: 
                            <a id='exEntry'>Entry HUMAN22168</a>
                          - <a id='exEntry2'>Entry P53_RAT</a>
                          -  <a id='exPhoto'>Search for "photoreceptor"</a> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


<script type="text/javascript">

$('#exPhoto').click( function() {
    $('#selectBrowser').val('SearchDb');
    $('#inputBrowser').val('photoreceptor').focus();
    $('#textarea').val('photoreceptor').focus();
});

$('#exEntry').click( function() {
    $('#selectBrowser').val('DisplayEntry');
    $('#inputBrowser').val('HUMAN22168').focus();
    $('#textarea').val('HUMAN22168').focus();
});

$('#exEntry2').click( function() {
    $('#selectBrowser').val('DisplayEntry');
    $('#inputBrowser').val('P53_RAT').focus();
    $('#textarea').val('P53_RAT').focus();
});
var textbox = $("#inputBrowser");
var textarea = $("<textarea id='textarea' rows='3' name='p1'></textarea>");
$("#toggle").click(function () {
    //Check for textbox or textarea
    if ($("#inputBrowser").length === 1) {
        //Copy value to textarea
        textarea.val(textbox.val());
        textarea.css("width", textbox.width());
        //Replace textbox with textarea
        textbox = textbox.replaceWith(textarea);
        $("#toggle").text('Revert to normal');
    } else {
        //Copy value to textbox
        textbox.val(textarea.val());
        //Replace textarea with textbox
        textarea = textarea.replaceWith(textbox);
        $("#toggle").text('Expand (e.g. to paste a long amino-acid sequence)');
    }
    $('#selectBrowser').val('SearchSeqDb');
});

</script>
<div class="row">
    <!--           -->
    <!-- 3 columns    -->
    <div class=" col-sm-12 col-md-10 col-md-offset-1">
        <div class="jumbotron">
            <div class="container">
                <div class="row">
                    <div class="col-sm-4 col-md-4 ">
                        <div class="thumbnail oma-3-panels">
                            <div class="caption">
                                <p class="text-center ">
                                    <span class="glyphicon glyphicon-question-sign glyphicon-xl"></span>
                                </p>

                                <h3>First time here?</h3>
                                <ul>
                                    <li>Read our
                                        <a href="{% url 'about'  %}">brief introduction to OMA</a>.
                                    </li>
                                    <li>Familiarise yourself with the
                                        <a href="{% url 'type'  %}">different types of orthologs provided</a>.
                                    </li>
                                    <li>Get ideas about
                                        <a href="{% url 'uses'  %}">different types of analyses you could do with OMA</a>.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-4">
                        <div class="thumbnail oma-3-panels">
                            <div class="caption">

                                <p class="text-center ">
                                    <a href="#" data-toggle="modal" data-target=".bs-example-modal-md">
                                        <span class="glyphicon glyphicon-download glyphicon-xl"></span>
                                    </a>
                                </p>
                                <h3>Download options</h3>
                                <ul>
                                    <li>
                                        <b><a href="{% url 'current'  %}">Current release</a>:</b>
                                        All data is available for downloading in a variety of formats.
                                    </li>

                                    <li>
                                        <b><a href="/standalone">OMA Standalone</a>:</b>
                                        OMA standalone allows you to infer orthologs on your own set of genomes.
                                    </li>

                                    <li>
                                        <b><a href="{% url 'export' %}">Export All-All</a>:</b>
                                        Export a set of genomes and their precomputed all-against-all comparisons for OMA standalone.
                                    </li>

                                    <li>
                                        <b><a href="{% url 'archives'  %}">Archives</a>:</b>
                                        Previous OMA releases remain available in this section. 
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 col-md-4 ">
                        <div class="thumbnail oma-3-panels ">
                            <div class="caption comment-text" id="latest-news">
                                <p class="text-center ">
                                    <span class="glyphicon glyphicon-info-sign glyphicon-xl">
                                    </span>
                                </p>
                                <h3>Latest news</h3>
                                <ul >
				    {% autoescape off %}
                                    {%for t in tweets %}
                                       <li>{{ t }}</li>
                                    {% endfor %}
				    {% endautoescape %}

                                </ul>
                                <p><a href="https://twitter.com/intent/user?screen_name=OMABrowser" class="btn btn-primary btn-sm bottomright" role="button">Follow us on Twitter</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!--           -->
    <!-- cite    -->
   <div class="row">
       <div class="col-sm-12 col-md-10 col-md-offset-1">
           <div class="alert alert-success thd" role="alert">
            	If you use OMA in your work, please consider citing:<br/>
                Altenhoff A et al., <em>The OMA orthology database in 2015: function predictions, better plant support, synteny view and other improvements</em>, Nucleic Acids Research, 2015, in press (doi:<a href="http://dx.doi.org/10.1093/nar/gku1158">10.1093/nar/gku1158</a>).
           </div>
       </div>
    </div>
</div>
<!--    end    -->
<!-- content    -->

{% endblock content %}
